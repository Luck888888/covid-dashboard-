{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"E:\\\\RssSchool\\\\covid-dashboard\\\\covid-dashboard\\\\covid-dashboard\\\\src\\\\App.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport MapView from './components/Map/MapView';\nimport 'leaflet/dist/leaflet.css';\nimport './Css/List.scss';\nimport axios from './axios';\nimport Summary from './components/Summary.jsx';\nimport DetailsView from './components/Map/DetailsView.jsx';\nimport './components/Map.css';\n/* eslint-disable linebreak-style */\n\nimport './App.scss';\nimport Table1 from './components/table1.jsx';\nimport Table1p2 from './components/table1p2.jsx';\nimport useFetch from './components/getInfo.jsx';\nimport './App.css';\nimport { filterInfo, periodInfo, statusInfo } from './js/table1Info';\nimport findCountryInfo from './js/findCountryInfo';\nimport Chart4 from './components/chart4.jsx';\nimport { getWorldChartInfo, getCountryChartInfo, dtimeNums } from './js/getChartInfo';\nimport Footer from './components/footer.jsx';\n\nfunction App() {\n  _s();\n\n  const [locationArray, setLocationArray] = useState([]);\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  const [mapCenter, setMapCenter] = useState([51.505, -0.09]);\n  const [loading, setLoading] = useState(false);\n  const info = useFetch('https://api.covid19api.com/summary');\n  const [status, setStatusInfo] = useState(0);\n  const [period, setPeriodInfo] = useState(0);\n  const [numeration, setNumeration] = useState(0);\n  const [countryData, setCountry] = useState('Belarus');\n  const [chartCountry, setChartCountry] = useState('World');\n  const [displayingCountryData, setdisplayingCountryData] = useState(false);\n  const OneCountryChartInfo = useFetch(`https://api.covid19api.com/dayone/country/${countryData}`);\n  const WorldChartInfo = useFetch(`https://api.covid19api.com/world?from=2020-03-01T00:00:00Z&to=${dtimeNums(-1)}T00:00:00Z`);\n  const population = useFetch(`https://restcountries.eu/rest/v2/name/${countryData}`);\n\n  const changeConditionfromTable = (p, s) => {\n    setPeriodInfo(p);\n    setStatusInfo(s);\n  };\n\n  const changeCondition = (p, s, n) => {\n    setPeriodInfo(p);\n    setStatusInfo(s);\n    setNumeration(n);\n  };\n\n  function sortedLocationArray(locations) {\n    // eslint-disable-next-line max-len\n    return [...locations].sort((location1, location2) => location2.latest.confirmed - location1.latest.confirmed);\n  }\n\n  const onSelectLocation = useCallback(id => {\n    const location = locationArray.find(_location => _location.id === id);\n\n    if (location === undefined) {\n      setSelectedLocation(null);\n      return;\n    }\n\n    setSelectedLocation(location);\n    const {\n      coordinates: {\n        latitude,\n        longitude\n      }\n    } = location;\n    setMapCenter([latitude, longitude]);\n  }, [locationArray]);\n\n  const filterChartData = () => {\n    if (displayingCountryData) {\n      return getCountryChartInfo(OneCountryChartInfo, period, status, numeration, population[0].population);\n    }\n\n    return getWorldChartInfo(WorldChartInfo, period, status, numeration);\n  };\n\n  const filterData = () => filterInfo(info, period, status);\n\n  const findCountry = country => {\n    setCountry(country);\n    setChartCountry(country);\n    setdisplayingCountryData(true);\n  };\n\n  const onDeselectLocation = useCallback(() => {\n    setSelectedLocation(null);\n  }, []);\n  useEffect(() => {\n    setLoading(true);\n    axios.get('/v2/locations').then(res => {\n      const sortedLocations = sortedLocationArray(res.data.locations);\n      setLoading(false);\n\n      if (res.status === 200) {\n        setLocationArray(sortedLocations);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []); // console.log(locationArray);\n\n  let detailsView = null;\n\n  if (selectedLocation != null) {\n    detailsView = /*#__PURE__*/_jsxDEV(DetailsView, {\n      location: selectedLocation,\n      onClickClose: onDeselectLocation\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }, this);\n  }\n\n  function sortedLocationArray(locations) {\n    // eslint-disable-next-line max-len\n    return [...locations].sort((location1, location2) => location2.latest.confirmed - location1.latest.confirmed);\n  }\n\n  useEffect(() => {\n    setLoading(true);\n    axios.get('/v2/locations').then(res => {\n      const sortedLocations = sortedLocationArray(res.data.locations);\n      setLoading(false);\n\n      if (res.status === 200) {\n        setLocationArray(sortedLocations);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []); // console.log(locationArray);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app__left\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app__header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"COVID-19 Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Summary, {\n        locationArray: locationArray,\n        loading: loading,\n        selectedLocation: selectedLocation,\n        onSelectItem: onSelectLocation,\n        onDeselectItem: onDeselectLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cards_map\",\n        children: [/*#__PURE__*/_jsxDEV(MapView, {\n          locationArray: locationArray,\n          mapCenter: mapCenter,\n          onSelectMarker: onSelectLocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 8\n        }, this), detailsView, /*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"App-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"COVID-19 Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 7\n        }, this), info && WorldChartInfo && /*#__PURE__*/_jsxDEV(Table1, {\n          changeCondition: changeConditionfromTable,\n          filterData: filterData,\n          filterChartData: filterChartData(periodInfo),\n          info: filterData(),\n          periodInfo: periodInfo,\n          findCountry: findCountry,\n          statusInfo: statusInfo,\n          status: status,\n          period: period\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 36\n        }, this), info && population && /*#__PURE__*/_jsxDEV(Table1p2, {\n          info: findCountryInfo(info, countryData),\n          population: population[0].population\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 32\n        }, this), info && WorldChartInfo && /*#__PURE__*/_jsxDEV(Chart4, {\n          changeCondition: changeCondition,\n          info: filterChartData(),\n          country: chartCountry,\n          statusInfo: statusInfo,\n          periodInfo: periodInfo,\n          status: status,\n          period: period,\n          numeration: numeration\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 36\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 7\n        }, this), info && /*#__PURE__*/_jsxDEV(Table1p2, {\n          info: findCountryInfo(info, countryData)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(Summary, {\n          locationArray: locationArray,\n          loading: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"l/qRwGwtL9Wnm7s18t8oDoklql8=\", false, function () {\n  return [useFetch, useFetch, useFetch, useFetch];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["E:/RssSchool/covid-dashboard/covid-dashboard/covid-dashboard/src/App.jsx"],"names":["React","useState","useEffect","useCallback","MapView","axios","Summary","DetailsView","Table1","Table1p2","useFetch","filterInfo","periodInfo","statusInfo","findCountryInfo","Chart4","getWorldChartInfo","getCountryChartInfo","dtimeNums","Footer","App","locationArray","setLocationArray","selectedLocation","setSelectedLocation","mapCenter","setMapCenter","loading","setLoading","info","status","setStatusInfo","period","setPeriodInfo","numeration","setNumeration","countryData","setCountry","chartCountry","setChartCountry","displayingCountryData","setdisplayingCountryData","OneCountryChartInfo","WorldChartInfo","population","changeConditionfromTable","p","s","changeCondition","n","sortedLocationArray","locations","sort","location1","location2","latest","confirmed","onSelectLocation","id","location","find","_location","undefined","coordinates","latitude","longitude","filterChartData","filterData","findCountry","country","onDeselectLocation","get","then","res","sortedLocations","data","catch","error","console","log","detailsView"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport MapView from './components/Map/MapView';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './Css/List.scss';\r\nimport axios from './axios';\r\nimport Summary from './components/Summary.jsx';\r\nimport DetailsView from './components/Map/DetailsView.jsx';\r\nimport './components/Map.css';\r\n/* eslint-disable linebreak-style */\r\nimport './App.scss';\r\nimport Table1 from './components/table1.jsx';\r\nimport Table1p2 from './components/table1p2.jsx';\r\nimport useFetch from './components/getInfo.jsx';\r\nimport './App.css';\r\n\r\n\r\nimport {\r\n  filterInfo,\r\n  periodInfo,\r\n  statusInfo,\r\n} from './js/table1Info';\r\nimport findCountryInfo from './js/findCountryInfo';\r\nimport Chart4 from './components/chart4.jsx';\r\nimport { getWorldChartInfo, getCountryChartInfo, dtimeNums } from './js/getChartInfo';\r\nimport Footer from './components/footer.jsx';\r\n\r\nfunction App() {\r\n  const [locationArray, setLocationArray] = useState([]);\r\n  const [selectedLocation, setSelectedLocation] = useState(null);\r\n  const [mapCenter, setMapCenter] = useState([51.505, -0.09]);\r\n  const [loading, setLoading] = useState(false);\r\n  const info = useFetch('https://api.covid19api.com/summary');\r\n  const [status, setStatusInfo] = useState(0);\r\n  const [period, setPeriodInfo] = useState(0);\r\n  const [numeration, setNumeration] = useState(0);\r\n  const [countryData, setCountry] = useState('Belarus');\r\n  const [chartCountry, setChartCountry] = useState('World');\r\n  const [displayingCountryData, setdisplayingCountryData] = useState(false);\r\n  const OneCountryChartInfo = useFetch(`https://api.covid19api.com/dayone/country/${countryData}`);\r\n  const WorldChartInfo = useFetch(`https://api.covid19api.com/world?from=2020-03-01T00:00:00Z&to=${dtimeNums(-1)}T00:00:00Z`);\r\n  const population = useFetch(`https://restcountries.eu/rest/v2/name/${countryData}`);\r\n\r\n  const changeConditionfromTable = (p, s) => {\r\n    setPeriodInfo(p);\r\n    setStatusInfo(s);\r\n  };\r\n  const changeCondition = (p, s, n) => {\r\n    setPeriodInfo(p);\r\n    setStatusInfo(s);\r\n    setNumeration(n);\r\n  };\r\n\r\n  function sortedLocationArray(locations) {\r\n    // eslint-disable-next-line max-len\r\n    return [...locations].sort((location1, location2) => location2.latest.confirmed - location1.latest.confirmed);\r\n  }\r\n  const onSelectLocation = useCallback((id) => {\r\n    const location = locationArray.find((_location) => _location.id === id);\r\n    if (location === undefined) {\r\n      setSelectedLocation(null);\r\n      return;\r\n    }\r\n    setSelectedLocation(location);\r\n    const { coordinates: { latitude, longitude } } = location;\r\n    setMapCenter([latitude, longitude]);\r\n  }, [locationArray]);\r\n  const filterChartData = () => {\r\n    if (displayingCountryData) {\r\n      return getCountryChartInfo(OneCountryChartInfo,\r\n        period,\r\n        status,\r\n        numeration,\r\n        population[0].population);\r\n    }\r\n    return getWorldChartInfo(WorldChartInfo, period, status, numeration);\r\n  };\r\n  const filterData = () => filterInfo(info, period, status);\r\n  const findCountry = (country) => {\r\n    setCountry(country);\r\n    setChartCountry(country);\r\n    setdisplayingCountryData(true);\r\n  };\r\n\r\n  const onDeselectLocation = useCallback(() => {\r\n    setSelectedLocation(null);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    axios.get('/v2/locations').then((res) => {\r\n      const sortedLocations = sortedLocationArray(res.data.locations);\r\n      setLoading(false);\r\n\r\n      if (res.status === 200) {\r\n        setLocationArray(sortedLocations);\r\n      }\r\n    })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n  // console.log(locationArray);\r\n\r\n  let detailsView = null;\r\n  if (selectedLocation != null) {\r\n    detailsView = <DetailsView location={selectedLocation} onClickClose={onDeselectLocation} />;\r\n  }\r\n\r\n  function sortedLocationArray(locations) {\r\n    // eslint-disable-next-line max-len\r\n    return [...locations].sort((location1, location2) => location2.latest.confirmed - location1.latest.confirmed);\r\n  }\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    axios.get('/v2/locations').then((res) => {\r\n      const sortedLocations = sortedLocationArray(res.data.locations);\r\n      setLoading(false);\r\n\r\n      if (res.status === 200) {\r\n        setLocationArray(sortedLocations);\r\n      }\r\n    })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n  // console.log(locationArray);\r\n\r\n  return (\r\n\r\n    <div className=\"App\">\r\n\r\n    <div className=\"app__left\">\r\n\r\n    <div className=\"app__header\">\r\n    <h1>COVID-19 Dashboard</h1>\r\n   </div>\r\n\r\n          <Summary\r\n        locationArray={locationArray}\r\n        loading={loading}\r\n        selectedLocation={selectedLocation}\r\n        onSelectItem={onSelectLocation}\r\n        onDeselectItem={onDeselectLocation}\r\n          />\r\n\r\n    <div className='cards_map'>\r\n       <MapView\r\n      locationArray={locationArray}\r\n      mapCenter={mapCenter}\r\n      onSelectMarker={onSelectLocation} />\r\n      {detailsView}\r\n      <header className=\"App-header\">\r\n        <h1>COVID-19 Dashboard</h1>\r\n      </header>\r\n      {(info && WorldChartInfo) && <Table1\r\n        changeCondition={changeConditionfromTable}\r\n        filterData={filterData}\r\n        filterChartData={filterChartData(periodInfo)}\r\n        info={filterData()}\r\n        periodInfo={periodInfo}\r\n        findCountry={findCountry}\r\n        statusInfo={statusInfo}\r\n        status={status}\r\n        period={period}\r\n      />}\r\n      {(info && population) && <Table1p2 info={findCountryInfo(info, countryData)}\r\n        population={population[0].population} />}\r\n      {(info && WorldChartInfo) && <Chart4\r\n        changeCondition={changeCondition}\r\n        info={filterChartData()}\r\n        country={chartCountry}\r\n        statusInfo={statusInfo}\r\n        periodInfo={periodInfo}\r\n        status={status}\r\n        period={period}\r\n        numeration={numeration}\r\n      />}\r\n      <Footer/>\r\n      {info && <Table1p2 info={findCountryInfo(info, countryData)} />}\r\n\r\n      <Summary\r\n     locationArray={locationArray}\r\n     loading={loading} />\r\n\r\n    </div>\r\n\r\n       </div>\r\n </div>\r\n\r\n  );\r\n}\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}